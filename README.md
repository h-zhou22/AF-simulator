# AF-simulator
Numeral simulator for testing best AF-ratio in AFD.

---

## Requirements

- Python 3.8+
- Standard Python libraries (`argparse`, `json`, etc.)

No additional dependencies are required unless specified elsewhere in the project.

---

## How to Run

The simulator is launched by executing `main.py` with command-line arguments:

```bash
python main.py [arguments]
```


## Core Arguments and Meanings

### Server and Batch Configuration

- **`--num_server`**
  - Number of Attention workers (servers) in the system.

- **`--num_batch`**
  - Number of batches inside each Attention worker.

- **`--batch_size`**
  - Number of requests contained in each batch.

## Request Generation Control

- **`--basic_num`**
  - Number of requests generated immediately at the beginning of the simulation.

- **`--total_request`**
  - Total number of requests that must be completed before the experiment terminates.

- **`--maximal_generation`**
  - Upper bound on the total number of requests that can be generated during the entire simulation.

> **Note:** For basic experiments, you may simply set `basic_num = total_request = maximal_generation`.

## Prompt Length and Length Limitation

- **`--max_prompt_len`**
  - Maximum allowed prompt length. Once this length is reached, the prompt will no longer be extended.

- **`--use_length_limit`**
  - Enable a maximum length constraint per batch.

- **`--batch_max_length`**
  - Maximum total token length allowed within a single batch.
  - This option is only effective when `--use_length_limit` is enabled.

## Output Control

- **`--out_prefix`**
  - Prefix for all output files generated by the simulator.

**Example:**

```bash
python main.py --num_batch=2 --basic_num=1000 --total_request=1000 --maximal_generation=1000 --batch_size=64 --out_prefix="test1"
```